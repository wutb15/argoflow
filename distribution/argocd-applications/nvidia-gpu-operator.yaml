apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: nvidia-gpu-operator
  namespace: argocd
spec:
  project: default
  source:
    repoURL: https://nvidia.github.io/gpu-operator
    targetRevision: v1.11.0
    chart: gpu-operator
    helm:
     parameters:
      - name : operator.defaultRuntime
        value : docker
      - name: driver.enabled
        value: "false"
      - name: toolkit.version
        value: v1.10.0-centos7
  destination:
    server: https://kubernetes.default.svc
    namespace: gpu-operator
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
      - CreateNamespace=true

